# 리눅스 사용자 및 그룹 관리

## 🧑‍💻 리눅스는 다중 사용자 운영체제

리눅스는 **여러 사용자가 동시에 시스템을 사용할 수 있는 다중 사용자 운영체제**입니다.
각 사용자는 **고유한 사용자 계정**을 가지고 있으며, **독립적인 권한과 환경**을 설정할 수 있습니다.
이를 통해 보안성과 유연한 시스템 관리가 가능합니다.

---

## 👤 리눅스 사용자 종류

리눅스에는 주로 두 가지 유형의 사용자가 존재합니다:

1. **루트 사용자 (root)**

    * 시스템에서 **모든 권한을 가진 관리자 계정**입니다.
    * 시스템 설정, 파일 접근, 사용자 관리 등 **제한 없이 모든 작업 수행** 가능.
    * 홈 디렉터리는 `/root`입니다.

2. **일반 사용자 (normal user)**

    * 시스템에 제한된 권한만 가진 사용자입니다.
    * 자신의 홈 디렉터리와 파일을 관리할 수 있으며, 시스템 설정은 변경할 수 없습니다.

---

## 📂 사용자 정보는 텍스트 파일로 관리됨

리눅스 시스템은 모든 사용자 정보를 **텍스트 파일**로 저장하고 관리합니다.
대표적인 파일은 다음과 같습니다:

### 1. `/etc/passwd` 파일

* 사용자 계정의 **기본 정보**가 저장되어 있는 파일입니다.
* 한 줄에 한 명의 사용자 정보가 있으며, `:`로 구분된 **7개의 필드**로 구성되어 있습니다:

```
사용자명:패스워드:UID:GID:사용자 설명:홈 디렉토리:로그인 셸
```

#### 예시

```
test:x:1001:1001:테스트 계정:/home/test:/bin/bash
```

#### 각 필드 설명

| 항목     | 설명                                     |
| ------ | -------------------------------------- |
| 사용자명   | 로그인 시 사용하는 계정 이름                       |
| 패스워드   | `x`로 표시됨 (실제 비밀번호는 `/etc/shadow`에 저장됨) |
| UID    | 사용자 ID (0이면 root)                      |
| GID    | 그룹 ID (`/etc/group`의 ID와 연결됨)          |
| 사용자 설명 | 사용자를 설명하는 문장 (보통 비어 있음)                |
| 홈 디렉토리 | 사용자의 기본 작업 디렉토리                        |
| 로그인 셸  | 로그인 시 실행되는 셸 프로그램 (예: `/bin/bash`)     |

---

### 2. `/etc/shadow` 파일

* 사용자 **비밀번호가 암호화된 형태**로 저장되는 파일입니다.
* 보안을 위해 **root만 읽을 수 있습니다.**
* `:`로 구분된 **9개 필드**로 구성되어 있습니다.

#### 예시

```
test:$6$2G...$T98sJ...:19387:0:99999:7:::
```

#### 주요 필드 설명

| 번호 | 설명                                    |
| -- | ------------------------------------- |
| 1  | 사용자명                                  |
| 2  | 암호화된 비밀번호 (`$6$`는 SHA-512 알고리즘 사용 의미) |
| 3  | 마지막 비밀번호 변경일 (1970년 1월 1일 기준 일 수)     |
| 4  | 비밀번호 변경까지 최소 일 수                      |
| 5  | 비밀번호 변경해야 하는 최대 일 수                   |
| 6  | 만료 전 경고 기간                            |
| 7  | 만료 후 계정 비활성화까지의 일 수                   |
| 8  | 계정 만료일 (비워져 있으면 만료 없음)                |
| 9  | 예약됨 (현재 사용되지 않음)                      |

---

## 🏠 사용자 생성 시 홈 디렉터리와 시작 스크립트

사용자를 생성하면 리눅스는 다음과 같은 작업을 자동으로 처리합니다:

* `/home/사용자명` 디렉터리 생성 (예: `/home/test`)
* 기본 설정 파일을 `/etc/skel`에서 복사
* 로그인 환경을 구성하는 **시작 스크립트** 파일 생성

### 생성되는 주요 시작 스크립트

| 파일명             | 설명                          |
| --------------- | --------------------------- |
| `.bash_profile` | 로그인 시 한 번 실행되는 초기화 설정       |
| `.bashrc`       | 셸이 열릴 때마다 실행되는 설정 (alias 등) |
| `.bash_logout`  | 로그아웃 시 실행되는 정리 작업           |

### 시작 스크립트는 왜 필요할까?

시작 스크립트는 사용자가 **매번 반복적으로 설정해야 할 환경을 자동화**해주는 도구입니다.
예를 들어 다음과 같은 상황에서 유용합니다:

* 자주 쓰는 명령어 단축 (`alias ll='ls -alF'`)
* 환경 변수 설정 (`export PATH=$PATH:/my/tools`)
* 접속하자마자 특정 디렉터리로 이동 (`cd ~/projects`)
* 로그아웃 시 임시 파일 정리 (`rm -rf /tmp/mytemp`)

---

## 🔍 `.bash_profile`과 `.bashrc`의 차이

리눅스를 처음 배우면 헷갈리는 부분입니다.
둘 다 **셸을 설정하는 파일**이지만 실행되는 시점이 다릅니다.

| 구분    | `.bash_profile`     | `.bashrc`        |
| ----- | ------------------- | ---------------- |
| 실행 시점 | 로그인할 때 한 번 실행됨      | 터미널이 열릴 때마다 실행됨  |
| 사용 환경 | SSH 접속, 콘솔 로그인 등    | 터미널 앱에서 새 셸 열기   |
| 용도    | 환경 변수 설정, PATH 추가 등 | alias, 프롬프트 설정 등 |

> 보통 `.bash_profile` 안에서 `.bashrc`를 불러오게 설정해두는 경우가 많습니다.

```bash
if [ -f ~/.bashrc ]; then
  . ~/.bashrc
fi
```

이렇게 하면 **로그인 시 `.bashrc` 내용도 자동 실행**되어 환경을 통일할 수 있습니다.

---

## 👥 그룹 정보: `/etc/group`

리눅스에서는 사용자를 **그룹**으로 묶어서 관리할 수 있습니다.
그룹 정보는 `/etc/group` 파일에 저장되며, 구성은 다음과 같습니다:

```
그룹명:비밀번호:GID:사용자1,사용자2,...
```

#### 예시

```
developers:x:1001:test,kim
```

| 항목     | 설명                                         |
| ------ | ------------------------------------------ |
| 그룹명    | 그룹 이름                                      |
| 비밀번호   | 일반적으로 사용되지 않으며 `x`로 표시됨                    |
| GID    | 그룹 ID                                      |
| 사용자 목록 | 해당 그룹에 속한 사용자들 (쉘에서 `groups 사용자명`으로 확인 가능) |

---

## ❓ 왜 "그룹"이라는 개념이 있을까?

리눅스에서는 **여러 사용자가 파일이나 디렉터리를 함께 사용할 수 있는 경우**가 많습니다.
이때, **각 사용자에게 개별 권한을 주는 것은 번거롭고 비효율적**입니다.

그래서 **공통된 목적을 가진 사용자들을 하나의 그룹으로 묶어서 관리**할 수 있도록 그룹 개념이 존재합니다.

### 그룹이 필요한 이유

1. **협업에 적합**

    * 예: `developers` 그룹에 속한 사람은 개발 폴더를 함께 사용할 수 있도록 설정

2. **권한 설정이 쉬움**

    * 그룹에만 권한을 주면 구성원 모두 접근 가능
      (예: `chown :developers my_project/`)

3. **보안 관리가 간편함**

    * 신규 인원이 들어오면 그룹에만 추가하면 끝

---

## ✅ 요약 정리

* 리눅스는 **여러 사용자가 동시에 사용하는 시스템**입니다.
* 사용자 정보는 `/etc/passwd`와 `/etc/shadow` 파일에 저장됩니다.
* 그룹은 여러 사용자를 묶어 **공통 권한을 부여하는 기능**입니다.
* 셸 접속 시 `.bash_profile`, `.bashrc` 등의 스크립트를 통해 **작업 환경을 자동화**할 수 있습니다.
* `.bash_profile`은 로그인 시 실행되고, `.bashrc`는 터미널이 열릴 때마다 실행됩니다.

---
