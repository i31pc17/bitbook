# 🧠 프로세스 개념 이해

---

## ✅ 1. 프로세스란?

* **실행 중인 프로그램 하나**를 "프로세스"라고 해요.
* 예: `vim`, `python`, `firefox` 같은 프로그램을 실행하면 각각 하나의 프로세스가 만들어져요.
* 리눅스는 각각의 프로세스를 **PID (Process ID)** 로 관리해요.

```bash
$ ps
  PID TTY          TIME CMD
 1234 pts/0    00:00:01 bash
 2345 pts/0    00:00:00 vim
```

---

## ✅ 2. 스레드란?

* 스레드는 **프로세스 안에서 일을 나눠서 처리하는 작은 실행 단위**예요.
* 하나의 프로세스는 **여러 개의 스레드**를 가질 수 있어요.
* 스레드들은 **메모리, 파일 등 자원을 공유**하며 동시에 일해요.

🧩 비유:

> 프로세스는 **회사**
> 스레드는 **회사 안에서 일하는 직원들**

```bash
$ ps -eLf | grep [PID]
```

* 이 명령어로 해당 프로세스에 **몇 개의 스레드가 있는지 확인**할 수 있어요.

---

## ✅ 3. 리눅스에서 스레드는 프로세스처럼 다뤄진다?

> 리눅스는 스레드를 **프로세스와 거의 똑같이 다뤄요**. 왜냐하면 스레드도 커널 내부에서는 **하나의 태스크(task)** 로 처리되기 때문이에요.

| 개념       | 설명                                                     |
| -------- | ------------------------------------------------------ |
| **PID**  | 각 스레드마다 고유한 ID (커널이 구분하기 위해 필요)                        |
| **TGID** | Thread Group ID, 즉 **프로세스를 대표하는 ID** (메인 스레드의 PID와 같음) |

🧩 예시:

| 역할     | PID  | TGID | 설명          |
| ------ | ---- | ---- | ----------- |
| 메인 스레드 | 1000 | 1000 | 프로그램 시작점    |
| 스레드 A  | 1001 | 1000 | 메모리 등 자원 공유 |
| 스레드 B  | 1002 | 1000 | 메모리 등 자원 공유 |

🧩 비유:

> 각 직원에게 사번(PID)이 있지만, 같은 팀 번호(TGID)를 공유하는 구조

---

## ✅ 4. 테스크(Task)란?

* 리눅스는 **프로세스나 스레드 모두를 "태스크(task)"** 라고 부릅니다.
* 커널 내부에서는 `task_struct`라는 구조체로 관리돼요.

> 스레드도, 프로세스도 전부 **하나의 태스크(task\_struct)** 로 표현됨

🧩 비유:

> 커널 입장에서는 **모든 실행 단위가 동일한 태스크**,
> 우리가 구분하는 프로세스/스레드는 **그 위의 역할 차이일 뿐**

---

## ✅ 5. 프로세스 그룹(Process Group)이란?

* 관련된 여러 프로세스를 **하나의 그룹**으로 묶은 단위예요.
* 프로세스 그룹에는 **PGID(Process Group ID)** 라는 번호가 부여돼요.
* 주로 터미널 환경에서 **여러 프로세스를 한 번에 제어**할 수 있게 해줘요.

#### 예시:

```bash
$ ls | grep keyword | less
```

* 세 개의 서로 다른 프로세스가 **같은 프로세스 그룹**으로 묶임
* `Ctrl+C` 같은 시그널을 그룹 전체에 보낼 수 있어요

🧩 비유:

> 프로세스 그룹 = **같이 묶인 밴드**
> 시그널 하나로 밴드 전체를 무대에서 내릴 수 있음

---

## ✅ 6. 세션(Session)이란?

* 사용자가 터미널에서 로그인하거나 ssh 접속하면 하나의 **세션**이 시작돼요.
* 이 세션은 여러 개의 프로세스 그룹을 포함할 수 있어요.
* 단, **한 세션에 하나의 포어그라운드 프로세스 그룹만** 있을 수 있어요.

🧩 비유:

> 콘서트 무대 = 세션
> 무대에 올라간 밴드 = 포어그라운드 프로세스 그룹
> 한 번에 한 밴드만 마이크(입력/출력)를 쓸 수 있음!

```bash
$ ps -o pid,sid,pgid,cmd
```

* `sid` = 세션 ID, `pgid` = 프로세스 그룹 ID

---

## ✅ 7. 프로세스 그룹 vs 스레드: 차이점은?

많이 헷갈리는 부분! 명확하게 비교해볼게요.

| 항목    | 프로세스 그룹                    | 멀티 스레드                                   |
| ----- |----------------------------|------------------------------------------|
| 정의    | 여러 개의 **독립된 프로세스**를 묶은 단위  | 하나의 프로세스 안에서 여러 **스레드(작업 단위)** 가 동시에 실행됨 |
| 자원 공유 | ❌ 공유 안 함 (각자 메모리 따로)       | ✅ 자원 공유 (메모리, 파일 핸들 등)                   |
| 목적    | 터미널/시그널 제어 묶음 관리           | 병렬 처리, 작업 속도 향상                          |
| 식별자   | PGID (Process Group ID)    | TGID (Thread Group ID)                   |
| 커널 단위 | 각각 별도 `task_struct`        | 각각 별도 `task_struct`                      |
| 사용 예  | `ls \| grep \| less` 파이프라인 | 웹서버의 요청 처리 등                             |

🧩 비유:

> * 프로세스 그룹 = 한 빌딩에 입주한 여러 회사 (서로 독립적)
> * 멀티 스레드 = 한 회사 안의 여러 직원 (같은 공간 사용)

---

## ✅ 8. 커널 내부 구조 – task\_struct

* 리눅스는 `task_struct`라는 구조체로 **모든 실행 단위(Task)** 를 관리해요.

```c
struct task_struct {
    pid_t pid;           // 프로세스 ID
    pid_t tgid;          // Thread Group ID
    long state;          // 실행 상태 (running, sleeping 등)
    char comm[16];       // 프로세스 이름
    ...
};
```

* 사용자 입장에서는 이 구조를 직접 보지 못하지만,
  `ps`, `top`, `/proc/[pid]/` 등을 통해 **간접적으로** 정보를 볼 수 있어요.

---

## ✅ 전체 개념 연결 구조

```
세션(Session)
└── 프로세스 그룹(Process Group)
    └── 프로세스(Process) = 태스크(Task)
        └── 스레드(Thread) = 태스크(Task)
```

* 세션 = 로그인한 사용자 환경 전체
* 프로세스 그룹 = 묶어서 제어할 명령어 집합
* 프로세스 = 실행 중인 프로그램 하나
* 스레드 = 프로그램 내부의 실행 단위
* 테스크 = 커널이 다루는 기본 실행 단위 (스레드와 프로세스 모두 해당)

---

## ✅ 핵심 요약 정리

| 개념      | 설명                         | 예시/비유                   |
| ------- | -------------------------- | ----------------------- |
| 프로세스    | 실행 중인 프로그램                 | `vim`, `python`, `bash` |
| 스레드     | 프로세스 안의 작업 단위              | 회사 안 직원들                |
| 테스크     | 커널이 관리하는 실행 단위             | 스레드, 프로세스 모두 해당         |
| 프로세스 그룹 | 관련된 프로세스 묶음                | 파이프라인 명령어               |
| 세션      | 로그인된 사용자 환경 전체             | 콘서트 무대                  |
| PID     | 각 실행 단위(스레드/프로세스)의 고유 번호   | 사번                      |
| TGID    | 하나의 프로세스를 구성하는 스레드들의 대표 ID | 팀 번호 (프로세스 전체 ID)       |
| PGID    | 같은 작업 단위로 묶은 프로세스 그룹 ID    | 밴드 번호                   |

---